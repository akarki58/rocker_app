<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_form_report" model="ir.ui.view">
        <field name="name">rocker.report.form</field>
        <field name="model">rocker.report</field>
        <field name="arch" type="xml">
            <form string="Rocker Report">
                <header>
                    <button type="object" string="Execute" name="export_report" confirm="Execute report immediately?"/>
                </header>
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <widget name="web_ribbon" title="Archived" bg_color="bg-danger"
                                invisible="active, '=', True"/>
                        <field name="active" invisible="1"/>
                    </div>
                    <div>
                        <h1 style="font-size: 1.9rem;">
                            <div class="row">
                                <div class="col col-md-auto">
                                    <label for="name" string="Report Name"/>
                                    <div>
                                        <field name="name" placeholder="new report" class="oe_inline"/>
                                    </div>
                                </div>
                                <div class="col col-md-8">
                                    <label for="report_application" string="Application"/>
                                    <div>
                                        <field name="report_application"
                                               placeholder="Application"
                                               class="oe_inline"
                                               style="width:80% !important;"/>
                                    </div>
                                </div>
                            </div>
                        </h1>
                    </div>

                    <div>
                        <group>
                            <group>
                                <field name="report_type" string="Type"/>
                                <field name="author_id" string="Author"/>
                                <field name="date_published" string="Published"/>
                            </group>
                            <group>
                                <field name="lang" string="Language"/>
                                <field name="description" string="Description"/>
                            </group>
                        </group>
                    </div>

                    <div>
                        <!--                        <notebook colspan="6">-->
                        <notebook>
                            <page string="Report">

                                <!-- collection reports-->
                                <div colspan="4">
                                    <!-- excel collection-->
                                    <group invisible="report_type != 'collection' or report_application != 'excel'">
                                        <field name="report_ids"
                                               options="{'no_show':True,'no_create':True,'no_open':True}" string="">
                                            <tree string="Reports" editable="bottom">
                                                <field name="sequence" widget="handle"/>
                                                <field name="name" readonly="1"/>
                                                <field name="report_application" readonly="1" column_invisible="1"/>
                                                <field name="description" readonly="1"/>
                                                <field name="database" readonly="1"/>
                                                <field name="sheet_name" readonly="1"/>
                                                <field name="date_published" readonly="1"/>
                                                <field name="author_id" readonly="1"/>
                                            </tree>
                                        </field>
                                    </group>
                                    <group invisible="report_type != 'collection' or report_application != 'excel'">
                                        <div colspan="2" class="text-muted text-center">
                                            Check that Excel Sheet names are unique!
                                        </div>
                                    </group>
                                    <!-- excel collection-->
                                    <!-- powerpoint collection-->
                                    <group invisible="report_type != 'collection' or report_application != 'powerpoint'">
                                        <field name="report_ids"
                                               options="{'no_show':True,'no_create':True,'no_open':True}" string="">
                                            <tree string="Reports" editable="bottom">
                                                <field name="sequence" widget="handle"/>
                                                <field name="name" readonly="1"/>
                                                <field name="report_application" readonly="1" column_invisible="1"/>
                                                <field name="description" readonly="1"/>
                                                <field name="database" readonly="1"/>
                                                <field name="sheet_name" readonly="1" column_invisible="1"/>
                                                <field name="date_published" readonly="1"/>
                                                <field name="author_id" readonly="1"/>
                                            </tree>
                                        </field>
                                    </group>
                                    <group invisible="report_type != 'collection'">
                                        <group invisible="report_application != 'powerpoint'">
                                            <field name="elements_per_slide" style="width: 20%%"
                                                   invisible="report_type == 'single' or report_application != 'powerpoint'"/>
                                        </group>
                                    </group>
                                    <!-- powerpoint collection-->
                                </div>
                                <!--collection reports-->

                                <!--single reports-->
                                <div colspan="4">
                                    <group>
                                        <group invisible="report_type != 'single'">
                                            <field name="database"
                                                   invisible="report_type != 'single'"
                                                   required="report_type == 'single'"/>
                                            <field name="select_clause"
                                                   invisible="report_type != 'single'"/>
                                            <field name="column_headings"
                                                   invisible="report_type != 'single'"/>
                                            <field name="file_name" string="Report filename"/>
                                            <field name="report_template" string="Template Filename" widget="binary"
                                                   filename="template_name"/>
                                            <field name="store_history" readonly="0"/>
                                            <field name="template_name" invisible="1"/>
                                        </group>
                                        <group invisible="report_type != 'single'">
                                            <field name="sheet_name" style="width: 20%%"
                                                   invisible="report_type != 'single' or report_application != 'excel'"/>
                                            <field name="slide_title"
                                                   invisible="report_application != 'powerpoint'"/>
                                            <field name="element"
                                                   invisible="report_type != 'single' or report_application != 'powerpoint'"/>
                                            <field name="chart_type"
                                                   invisible="report_type != 'single' or element != 'chart'"/>
                                            <field name="legend"
                                                   invisible="report_type != 'single' or element != 'chart'"/>
                                            <field name="show_values"
                                                   invisible="report_type != 'single' or element != 'chart'"/>
                                        </group>
                                    </group>
                                </div>
                                <!--single reports-->

                                <!--execution info-->
                                <group invisible="report == False" style="white-space:nowrap;" string="Execution info">
<!--                                    <separator string="Execution info"></separator>-->
                                    <field name="report" widget="binary" readonly="1" filename="file_name"/>
                                    <field name="date_executed" readonly="1"/>
                                    <field name="perma_link" readonly="1" widget="url"
                                           text="Latest Report"/>
                                    <field name="execute_link" readonly="1" widget="url"
                                           text="Execute and Download Report"/>
                                </group>
                                <!--execution info-->

                            </page>
                            <page string="Scheduling">
                                <group>
                                    <field name="schedule_onoff"/>
                                    <field name="interval_number" style="width: 10%%; margin-right: 10px;"
                                           class="oe_inline" default="10"/>
                                    <field name="interval_type" class="oe_inline" default="min"/>
                                    <field name="execute_at" widget="float_time" style="width: 10%%"/>
                                    <field name="firstcall" style="width: 40%%"/>
                                    <field name="nextcall" readonly="1"/>
                                </group>
                                <group col="2">
                                    <field name="send_by_email" invisible="schedule_onoff, '=', False"/>
                                    <field name="email_subject"
                                           invisible="['|',(send_by_email == False), (schedule_onoff ==  False)]"/>
                                    <field name="email_to"
                                           nvisible="['|',(send_by_email == False), (schedule_onoff ==  False)]"/>
                                    <field name="email_body"
                                           nvisible="['|',(send_by_email == False), (schedule_onoff ==  False)]"/>
                                </group>
                            </page>
                            <page string="Access rights">
                                <group col="2">
                                    <field name="company_id"/>
                                </group>
                            </page>
                        </notebook>
                    </div>
                </sheet>
            </form>
        </field>
    </record>

    <record id="view_tree_report" model="ir.ui.view">
        <field name="name">rocker.report.list</field>
        <field name="model">rocker.report</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name"/>
                <field name="report_application"/>
                <field name="description"/>
                <field name="database"/>
                <field name="author_id"/>
                <field name="date_published"/>
            </tree>
        </field>
    </record>


    <record id="view_search_report" model="ir.ui.view">
        <field name="name">rocker.report.filter</field>
        <field name="model">rocker.report</field>
        <field name="arch" type="xml">
            <search string="report_filter">
                <field name="name"/>
                <field name="report_application"/>
                <field name="description"/>
                <field name="database"/>
                <filter name="filter_inactive"
                        string="Inactive"
                        domain="[('active','=',False)]"/>
                <filter name="filter_active"
                        string="Active"
                        domain="[('active','=',True)]"/>
                <separator/>
                <filter name="single_reports"
                        string="Single Reports"
                        domain="[('report_type','=','single')]"/>
                <filter name="collection_reports"
                        string="Collection Reports"
                        domain="[('report_type','=','collection')]"/>
                <group expand="0" string="Group By...">
                    <filter name="type_group" string="Group by Report type"
                            domain="[]" context="{'group_by':'report_type'}"/>
                </group>
            </search>
        </field>
    </record>


</odoo>
